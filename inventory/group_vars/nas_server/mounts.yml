# =============================================================================
# NAS Server - Filesystem Mounts (Physical Drives + Bind Mounts)
# =============================================================================
# Portable: drives and bind mounts travel with the NAS role.
# If migrating to new hardware with the same drives, UUIDs stay the same.
# ZFS drives (nas_zfs, media-02, media-03) are managed by ZFS, NOT listed here.

filesystem_mounts:
  # --- Physical Drives ---

  # 2TB Lacie SSD (ext4) - media storage + SABnzbd incomplete downloads
  - path: /srv/nas-01
    src: "UUID=f356a268-d53b-41fa-95a7-3df47c1c22bc"
    fstype: ext4
    opts: "noatime,nofail,x-systemd.device-timeout=5s"

  # LUKS-encrypted drive (ext4 on dm-crypt)
  - path: /srv/nas-02
    src: /dev/mapper/nas02_crypt
    fstype: ext4
    opts: "noatime,nofail"

  # --- Bind Mounts ---

  # Plex library (bind from mergerfs pool)
  - path: /srv/plex-library
    src: /srv/media/plex
    fstype: none
    opts: "bind,nofail,x-systemd.requires-mounts-for=/srv/media"

  # NAS-ZFS accessible at /mnt/nas-zfs (for Samba shares that reference /mnt paths)
  - path: /mnt/nas-zfs
    src: /srv/nas-zfs
    fstype: none
    opts: "rbind,nofail"

  # NFS export: configs directory
  - path: /srv/exports/configs
    src: /srv/nas-zfs/configs
    fstype: none
    opts: "bind,nofail"

  # NFS export: ansible directory
  - path: /srv/exports/ansible
    src: /srv/nas-zfs/configs/ansible
    fstype: none
    opts: "bind,nofail"

  # SABnzbd incomplete downloads (Lacie SSD fast storage)
  - path: /srv/media-downloads
    src: /srv/nas-01/media/plex/downloads/incomplete
    fstype: none
    opts: "bind,nofail"

  # Incomplete downloads alias
  - path: /srv/incomplete-downloads
    src: /srv/media-downloads
    fstype: none
    opts: "bind,nofail"
